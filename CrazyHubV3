local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")

-- Create the ScreenGui
local gui = Instance.new("ScreenGui")
gui.ResetOnSpawn = false
gui.IgnoreGuiInset = true -- This will ensure the UI ignores the top bar offset
gui.Name = "LoadingScreen"
gui.Parent = Players.LocalPlayer:WaitForChild("PlayerGui")

-- Fullscreen Background
local background = Instance.new("Frame")
background.Size = UDim2.new(1, 0, 1, 0)
background.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
background.Parent = gui

-- Main Loading Box
local loadingFrame = Instance.new("Frame")
loadingFrame.Size = UDim2.new(0.4, 0, 0.4, 0)
loadingFrame.Position = UDim2.new(0.5, 0, 0.5, 0)
loadingFrame.AnchorPoint = Vector2.new(0.5, 0.5)
loadingFrame.BackgroundColor3 = Color3.fromRGB(15, 15, 20)
loadingFrame.BorderSizePixel = 2
loadingFrame.BorderColor3 = Color3.fromRGB(200, 50, 50)
loadingFrame.Parent = background
Instance.new("UICorner", loadingFrame).CornerRadius = UDim.new(0, 10)

-- Title Text
local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, 0, 0.15, 0)
title.Position = UDim2.new(0, 0, 0, 10)
title.BackgroundTransparency = 1
title.Text = "BLOX FRUITS"
title.TextColor3 = Color3.fromRGB(255, 100, 100)
title.TextScaled = true
title.Font = Enum.Font.GothamBold
title.Parent = loadingFrame

-- Subtitle Text
local subTitle = Instance.new("TextLabel")
subTitle.Size = UDim2.new(1, 0, 0.1, 0)
subTitle.Position = UDim2.new(0, 0, 0.2, 0)
subTitle.BackgroundTransparency = 1
subTitle.Text = "Loading Script..."
subTitle.TextColor3 = Color3.fromRGB(200, 50, 50)
subTitle.TextScaled = true
subTitle.Font = Enum.Font.Gotham
subTitle.Parent = loadingFrame

-- Progress Bar Background
local progressBarBG = Instance.new("Frame")
progressBarBG.Size = UDim2.new(0.8, 0, 0.07, 0)
progressBarBG.Position = UDim2.new(0.1, 0, 0.4, 0)
progressBarBG.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
progressBarBG.Parent = loadingFrame
Instance.new("UICorner", progressBarBG).CornerRadius = UDim.new(0, 10)

-- Progress Bar Fill
local progressBar = Instance.new("Frame")
progressBar.Size = UDim2.new(0, 0, 1, 0)
progressBar.BackgroundColor3 = Color3.fromRGB(255, 50, 50)
progressBar.Parent = progressBarBG
Instance.new("UICorner", progressBar).CornerRadius = UDim.new(0, 10)

-- Progress Percentage Text
local progressText = Instance.new("TextLabel")
progressText.Size = UDim2.new(1, 0, 1, 0)
progressText.BackgroundTransparency = 1
progressText.Text = "1%"
progressText.TextColor3 = Color3.fromRGB(255, 255, 255)
progressText.TextScaled = true
progressText.Font = Enum.Font.GothamBold
progressText.Parent = progressBarBG

-- Status Text
local statusText = Instance.new("TextLabel")
statusText.Size = UDim2.new(1, 0, 0.1, 0)
statusText.Position = UDim2.new(0, 0, 0.55, 0)
statusText.BackgroundTransparency = 1
statusText.Text = "Starting up..."
statusText.TextColor3 = Color3.fromRGB(255, 255, 255)
statusText.TextScaled = true
statusText.Font = Enum.Font.Gotham
statusText.Parent = loadingFrame

-- Function to Simulate Loading (30 seconds)
local function startLoading()
    for i = 1, 100 do
        -- Animate progress bar
        TweenService:Create(progressBar, TweenInfo.new(0.3, Enum.EasingStyle.Linear), {Size = UDim2.new(i / 100, 0, 1, 0)}):Play()
        -- Update progress text
        progressText.Text = i .. "%"

        -- Update status messages
        if i < 30 then
            statusText.Text = "Initializing..."
        elseif i < 60 then
            statusText.Text = "Connecting to the server..."
        elseif i < 90 then
            statusText.Text = "Finalizing setup..."
        else
            statusText.Text = "Almost ready..."
        end

        wait(0.3) -- 0.3 seconds per update (100 updates = 30 seconds)
    end
    
    gui:Destroy() -- Remove UI after loading is complete
    showGui() -- Show the cool UI after loading is done
end

task.spawn(startLoading)

-- Show GUI Function (Loads after the loading screen)
local function showGui()
    local mainGui = Instance.new("ScreenGui")
    mainGui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")

    local main = Instance.new("Frame")
    main.Size = UDim2.new(0, 300, 0, 200)
    main.Position = UDim2.new(0.5, -150, 0.5, -100)
    main.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
    main.BorderSizePixel = 0
    main.Parent = mainGui

    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 10)
    corner.Parent = main

    local title = Instance.new("TextLabel")
    title.Size = UDim2.new(1, 0, 0.15, 0)
    title.Position = UDim2.new(0, 0, 0, 10)
    title.BackgroundTransparency = 1
    title.Text = "Crazy Hub | BLOX FRUITS"
    title.TextColor3 = Color3.fromRGB(255, 255, 255)
    title.TextScaled = true
    title.Font = Enum.Font.GothamBold
    title.Parent = main
end
